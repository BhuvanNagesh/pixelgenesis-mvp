<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Token Generated ‚Äî PixelGenesis</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="particles">
        <div class="particle" style="left: 10%;"></div>
        <div class="particle" style="left: 30%;"></div>
        <div class="particle" style="left: 50%;"></div>
        <div class="particle" style="left: 70%;"></div>
        <div class="particle" style="left: 90%;"></div>
    </div>

    <div class="container">
        <h2>‚úì Token Generated Successfully</h2>
        <p class="subtitle">Your privacy-preserving access token is ready</p>

        <div class="success">
            Token created and ready for verification
        </div>

        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
            <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
            <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
        </svg>

        <div style="margin-top: 30px;">
            <label>Access Token</label>
            <div class="mono-box" id="token-box">{{ token }}</div>
            <button class="copy-btn" onclick="copyToken()"><span>üìã Copy Token</span></button>
        </div>

        <div style="margin-top: 20px;">
            <label>Token Type</label>
            <div class="mono-box">{{ field }}</div>
        </div>

        {% if extra %}
            <div style="margin-top: 20px;">
                <label>File CID</label>
                <div class="mono-box">{{ extra.cid }}</div>
            </div>

            <div style="margin-top: 20px;">
                <label>File URL</label>
                <div class="mono-box">
                    <a href="{{ extra.url }}" target="_blank" style="color: var(--neon-green);">{{ extra.url }}</a>
                </div>
            </div>
        {% endif %}

        {% if shares %}
            <div style="margin-top: 40px; padding: 30px; background: rgba(15, 62, 46, 0.3); border: 2px solid var(--neon-green); border-radius: 16px;">
                <h3 style="color: var(--neon-green); margin-bottom: 20px; font-size: 1.5rem;">üîë Shamir Secret Shares</h3>
                <p style="color: var(--mint-glow); margin-bottom: 24px; font-size: 1.05rem;">
                    Your file was encrypted with AES-256. To recover the decryption key, you need ANY 2 of these 3 shares:
                </p>

                {% for s in shares %}
                    <div class="share-box">
                        <code>{{ s }}</code>
                    </div>
                {% endfor %}

                <p style="color: #fca5a5; margin-top: 20px; font-size: 0.95rem;">
                    ‚ö†Ô∏è Store these shares securely in different locations. Losing all shares means permanent data loss.
                </p>
            </div>
        {% endif %}

        <a href="/verify_access" class="btn" style="margin-top: 40px;"><span>‚Üí Verify Token</span></a>
        <a href="/tokens" class="btn"><span>üìä View All Tokens</span></a>
        <a href="/" class="btn" style="background: rgba(15, 62, 46, 0.5); border-color: rgba(31, 169, 115, 0.5);"><span>‚Üê Back to Home</span></a>
    </div>

    <script>
        function copyToken() {
            const text = document.getElementById('token-box').innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úì Token copied to clipboard!');
            });
        }
    </script>
</body>
</html>
