<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login ‚Äî PixelGenesis</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="particles">
        <div class="particle" style="left: 15%;"></div>
        <div class="particle" style="left: 35%;"></div>
        <div class="particle" style="left: 55%;"></div>
        <div class="particle" style="left: 75%;"></div>
        <div class="particle" style="left: 95%;"></div>
    </div>

    <div class="container">
        <h2>üîë Authenticate Privately</h2>
        <p class="subtitle">Zero-knowledge proof authentication system</p>

        {% if error %}
            <div class="error">‚úó {{ error }}</div>
        {% endif %}

        {% if success %}
            <div class="success">
                ‚úì Authentication Successful
            </div>

            <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
            </svg>

            <div style="text-align: center; margin-top: 30px;">
                <p style="font-size: 1.2rem; color: var(--mint-glow); margin-bottom: 20px;">
                    Welcome back! You are now authenticated with DID:
                </p>
                <div class="mono-box">{{ did }}</div>
            </div>

            <a href="/" class="btn" style="margin-top: 30px;"><span>‚Üê Back to Home</span></a>

        {% elif step == 'sign' %}
            <form action="/verify" method="POST">
                <input type="hidden" name="did" value="{{ did }}">
                <input type="hidden" name="challenge" value="{{ challenge }}">

                <div style="margin-bottom: 30px;">
                    <p style="font-size: 1.1rem; color: var(--mint-glow); margin-bottom: 20px;">
                        Authentication Challenge Generated
                    </p>
                    <div class="mono-box">{{ challenge }}</div>
                </div>

                <label for="private_key">Enter Your Private Key</label>
                <input type="password" name="private_key" id="private_key" placeholder="Paste your private key here" required>

                <button type="submit"><span>üîì Authenticate</span></button>
                <a href="/login" class="btn" style="background: rgba(15, 62, 46, 0.5); border-color: rgba(31, 169, 115, 0.5);"><span>‚Üê Back</span></a>
            </form>

        {% else %}
            <form method="POST">
                <label for="did">Decentralized Identifier (DID)</label>
                <input type="text" name="did" id="did" placeholder="did:pg:..." required>

                <div style="text-align: center; margin: 40px 0;">
                    <div style="width: 100px; height: 100px; margin: 0 auto; background: rgba(31, 169, 115, 0.1); border-radius: 50%; border: 2px solid var(--neon-green); display: flex; align-items: center; justify-content: center; font-size: 3rem; animation: shieldGlow 2s ease-in-out infinite;">
                        üõ°Ô∏è
                    </div>
                </div>

                <button type="submit"><span>‚Üí Continue</span></button>
                <a href="/" class="btn" style="background: rgba(15, 62, 46, 0.5); border-color: rgba(31, 169, 115, 0.5);"><span>‚Üê Back to Home</span></a>
            </form>
        {% endif %}
    </div>
</body>
</html>
